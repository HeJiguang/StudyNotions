# C复习-联合体/枚举/动态内存管理

## 联合体

联合体和结构体一样，联合体也是由一个或者多个成员构成，这些成员可以是不同的类型。

但是编译器只为最大的成员分配足够的内存空间。联合体的特点是所有成员共用一块内存空间。所以联合体也叫做共用体。

联合体给一个成员赋值，其他成员的值也跟着变化。

关键字：`union`

```c
union S{
    char c;
    int u;
};
```

联合体的大小是最大值的大小。

## 枚举

gumsy，就是一一列举。

```c
enum Dat{
    Mon,
    Tues,
    ...
}
```

枚举类型的变量只能使用枚举常量赋值。

枚举的好处：

1. 增加代码的可读性和可维护性
2. 和#define定义的标识符相比较，有类型，更加严谨
3. 便于调试，因为#define在编译时就会被删除
4. 使用方便，一次可以定义多个
5. 有作用域的范围

## 动态内存管理

用来申请在编译前不确定的空间。

### malloc和free

```c
void * malloc(size_t size);
```

malloc只知道申请多大的空间，但是不知道这些空间中放置什么类型的数据，所以返回`void*`

如果开辟失败，则返回NULL指针，所以malloc的返回值一定要经过检查后使用。

还内存的时候使用的是`free`函数。

malloc申请的空间在内存的堆区

malloc申请的空间在未定义之前，值是随机的。

### calloc和realloc

calloc函数在开辟函数的时候会将函数初始化。

```c
int *p = (int*)calloc(10,sizeof(int));
```

realloc函数：

```c
void *realloc(void * ptr,size_t size);
```

ptr是要调整的内存的地址。

size是调整之后的新大小。

如果给realloc的第一个参数给空指针，其的作用相当于malloc

